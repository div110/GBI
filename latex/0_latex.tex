\documentclass[12pt,a4paper,twoside,]{article}
\usepackage[inner=4cm,outer=2.5cm,top=2.5cm,bottom=2.5cm]{geometry}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{titlesec}
\onehalfspacing

\setlength{\parskip}{6pt}



\usepackage{fancyhdr}
\renewcommand{\headrulewidth}{0pt}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[LE,RO]{\thepage}

\setlength{\headheight}{14.5pt}

\usepackage{fontspec}
\setmainfont{TeX Gyre Termes}

\begin{document}
\begin{figure}[h!]
\centering
\includegraphics[scale=0.5,]{obrazky/sssi_logo.png}


	
\textsf{\textbf{\Huge Maturitní práce\\}}
\textsf{ \textbf{\Huge Script pro instalaci operačního systému Gentoo \\}}
\textsf{ \Huge \\Studijní obor: 18-20-M/01 \\Informační technologie\\}
\textsf{\LARGE \\Autor: Halamka David\\
Třída: IT4/A\\
Vedoucí práce: Petr Martínek
}
\end{figure}


\newpage
Prohlašuji, že jsem předkládanou práci vypracoval sám za použití zdrojů a literatury v ní uvedených. Souhlasím s tím, aby moje maturitní práce byla využívána pro potřeby Střední školy spojů a informatiky, Tábor, Bydlinského 2474 nebo jiných subjektů, které se podílely na zadání práce.\\ 
\\	…………………….~~~~~~~~~~~~~……………………..\\
datum~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~podpis



\newpage
\renewcommand{\contentsname}{\textsf{Obsah}}\tableofcontents

\newpage
\section{\textsf{Anotace}}
{Teoretická část maturitní práce popisuje proces instalace operačního systému Gentoo
	a její vliv na tvorbu scriptu. V práci je také zároveň rozvedena problematika stěžejních
	kroků instalace a částí operačního systému. Cílem práce bylo usnadnit novým uživatelům instalaci a konfiguraci
	systému pro jednodušší přechod z jiných operačních systémů. Z toho důvodu je script volně dostupný na webových stránkách Github. 
	\vspace{2cm}
	\\Klíčová slova:
	\\Keywords:
}


\newpage

\section{\textsf{Příprava disků}}
{Příprava disků je nutným krokem každé instalace. Hlavním důvodem je, 
že stávající schéma rozdělení a souborové systémy nemusí být v souladu s novým operačním systémem. 
Z toho důvodu nestačí disky pouze smazat. Použíté schéma rozdělení je GPT. 
Mezi hlavní důvody pro výběr GPT patří: lepší kompatibilita s UEFI systémy, 
vyšší maximální počet oddílů, podpora disků větších než 2TB a kontrola integrity.
Oddíly a jejích nastavení mají velký vliv na paměť i výkon systému. Proto je potřeba, 
aby script i samotná instalace přizpůsobily rozdělení specifikacím systému.} 

{\hspace*{-1.5em}První je EFI oddíl. Slouží pro zavádění UEFI systémů. Bude obsahovat Bootloader. 
Velikost je pevně nastavena na 1GB, jelikož není potřeba škálovat se systémem.
Oddíl bude naformátován jako fat32.}

{\hspace*{-1.5em}Druhý je Swap oddíl. Swap obsahuje časti operační paměti, vyhodnocené jako nejméně používané. 
Rozbor samotného algoritmu pro správu paměti je mimo záběr maturitní práce. Je třeba,
aby velikost Swap oddílu rostla s kapacitou paměti RAM. Tento vztah je způsoben vlastnostmi hibernace, 
která nahraje celý obsah operační paměti na Swap oddíl. Má-li tedy systém využívat hibernaci, je nutné
aby velikost oddílu byla ostře větší, než velikost paměti RAM. }

{\hspace*{-1.5em}Třetí je Root oddíl. Obsahuje komplement EFI oddílu. Je to zároveň také jediný oddíl z trojice, 
u kterého lze účině zvolit souborový systém. Zabírá zbytek místa na disku.}

{\hspace*{-1.5em}Script vytváří oddíly pomocí nástroje \texttt{fdisk}. \texttt{fdisk} je interaktivní nástroj na tvorbu \\oddílu, proto je nutné aby script dodával instrukce přímo do vstupu nástroje, ne shellu. Přesměrování provádí Here document, který dokáže přesměrovat dávkovaný vstup přímo do programu.\\ Výběr disku:}
\\ 

\texttt{\hspace*{-1.5em}select diskname in /dev/*; do\\}
\texttt{if [[ -n \$diskname ]]; then\\}
\texttt{\hspace*{2em}echo "Zvolen: \$diskname"\\}
\texttt{\hspace*{2em}break\\}
\texttt{else\\}
\texttt{\hspace*{2em}echo "Vyberte zařízení"\\}
\texttt{fi\\}
\texttt{done\\}


\texttt{\hspace*{-1.5em}select} umožňuje vybrat soubor ze složky \texttt{/dev}, kde se nacházejí bloková zařízení.
\newpage
{\hspace*{-1.5em}Pro škálování Swapu je potřeba zjistit informace o velikosti paměti RAM. Ty jsou uložené v souboru \texttt{/proc/meminfo}. Pro \texttt{fdisk} je potřeba, aby jsme dostali pouze numerický údaj. Přečtení a zpracování tedy vypadá následovně:\\
	
\texttt{swapsize=\$(sudo cat /proc/meminfo | head -n 1 | sed 's/[\^0-9]//g')}\\

\hspace*{-1.5em}Výsledné číslo pak zvětšíme o 50 \%:\\ 

\texttt{swapsize=\$(((\$swapsize/1000000)*3/2))}\\




\newpage
\subsection{\textsf{Souborový systém}}
Manuální instalace i script dávají uživateli možnost vyběru souborového systému pro kořenový oddíl.
Souborový systém slouží k interpretaci dat ve formě souborů, adresářů a metadat. Dělí se na dvě hlavní skupiny: Žurnálovací a Copy on Write.\\
Žurnálovací systémy uchovávají záznam prováděných operací ve speciální datové struktuře v rámci jejich oddílu. 
Záznam slouží k obnově konzistence souborového systému v případě přerušení zápisu, způsobeným například odpojením zdrojem energie. \\
Copy on Write systémy nevytváří kopii souboru pro úpravu, pouze předají odkaz na již existující soubor a to klidně více procesům najednou.
Kopii dat vytvoří až v případě, že se nějaký z procesů pokusí přepsat data. Tento přístup umožňuje integraci snapshotů a RAIDů.
Script volí mezi třemi souborovými systémy: XFS, btrfs a ext4. \\Je vhodné zmínit, že formátování odstraní veškerá data z oddílu. 
Formátování oddílů pro souborový systém ve scriptu provádí příkaz mkfs: 

\texttt{mkfs.vfat -F 32 /dev/sda1}\\
\texttt{\hspace*{1.5em}mkfs.\$filesystem /dev/sda3}

\hspace*{-1.5em}Speciální případ je Swap, který je potřeba prvně inicializovat: 

\texttt{mkswap /dev/sda2}

\hspace*{-1.5em}A poté aktivovat:

\texttt{swapon /dev/sda2}

\hspace*{-1.5em}Nyní stačí namontovat oddíly na jejich adresáře:

\texttt{mount /dev/sda3 /mnt/gentoo}\\
\texttt{\hspace*{1.5em}mount /dev/sda1 /mnt/gentoo/efi}

\newpage
\section{\textsf{Stage Tarball}}
{Pro instalaci základního systému je třeba tzv. Stage 3 Tarball, neboli archiv obsahující
minimální systém pro začátek instalace. Archivů je mnoho a dělí se podle profilů.

\hspace*{-1.5em}Každý profil blíže specifikuje budoucí záměr a funkce systému. Například profil
‘Desktop’ obsahuje balíčky, respektive jejich USE přepínače, usnadňující zprovoznění
uživatelského rozhraní.
Profilů existuje velké množství, čehož důsledkem je více funkčních kombinací. Z
tohoto důvodu script umožňuje zvolit archiv jak automaticky, tak i manuálně pomocí
URL adresy. 

\hspace*{-1.5em}Pro výchozí výběr byl zvolen archiv z FTP serveru Fakulty informatiky
Masarykovy Univerzity v Brně. Script řeší výběr archivu pomocí jednoduché logiky,
která upřednostní manuální výběr, je-li dostupný:}\\

\texttt{\hspace*{-1.5em}read -p stage3 2>\&1}\\
\texttt{if [ -z "\$stage3" ]; then}\\
\texttt{\hspace*{+1.5em}wget https://ftp.fi.muni.cz/pub/linux/gentoo/...\\}
\texttt{else}\\
\texttt{\hspace*{+1.5em}wget \$stage3}\\
\texttt{fi}\\

{\hspace*{-1.5em}Nesprávně zvolený profil lze po dokončení instalace změnit pomocí:\\}

\texttt{eselect profile list}\\
\texttt{\hspace*{--1.5em}eselect profile set \#}\\

{\hspace*{-1.5em}Uživatel by však měl mít na paměti, že změna profilu může, v některých případech
vést až k překompilování celého systému.}

\hspace*{-1.5em}V tuto chvíli se doporučuje, aby uživatel provedl kontrolu archivu pomocí checksumů.
Ty lze získat v souboru .DIGESTS z jakéhokoliv zrdcadla. Pro druhý, vlastní checksum je doporučený nástroj sha256sum, který vytváří checksum pomocí algoritmu sha256. Použití:

\texttt{sha256sum nazevSouboru}

\hspace*{-1.5em}Z bezpečnostních důvodů není doporučeno starší algoritmy, například: md5, sha1...

\hspace*{-1.5em}Script, z důvodu minimalizace rizik a skrytých paradoxů, tuto kontrolu neprovádí.
\newpage
\subsection{\textsf{Instalace archivu}}
Před instalací je vhodné nastavit systémový čas. K tomu slouží chrony:\\
\texttt{chrony -q}\\
 anebo, není-li dostupné RTC, pomocí: \\ \texttt{date mmddhhmmyy}.\\
V případě jakýchkoliv pochybností je možné datum zkontrolovat pomocí \texttt{date}.
\\Archiv je potřeba extrahovat do cílového adresáře nového systému. Proto je nutné,\\
aby byl adresář již předem vytvořený. Ve velké většině případů \texttt{/mnt/gentoo}.\\
Tarball instalujeme pomocí nástroje tar v příkazu:

\texttt{\hspace*{-1.5em}tar xpvf stage3-*.tar.xz --xattrs-include='*.*' --numeric-owner \\-C /mnt/gentoo}

\hspace*{-1.5em}Pro lepší orientaci bude význam přepínačů a argumentů rozepsán:

\hspace*{-1.5em}\texttt{x} - soubor bude extrahován.\\
\texttt{p} - ponechat oprávnění. *\\
\texttt{v} - zapíná výpis průběhu extrakce, volitelný.\\
\texttt{f} - určuje jaký soubor má být extrahován a cestu k němu.\\
\texttt{--xattrs-include='*.*'} - zachová rozšiřující atributy.
(např.:SELinux štítky)\\
\texttt{--numeric-owner} - zachová vlastnictví podle číselných ID uživatelů a
skupin.\\
\texttt{-C /mnt/gentoo} - extrahuje obsah do uvedeného adresáře.\\

\hspace*{-1.5em}*Ačkoliv tar již nemění oprávnění při extrakci, může dojít ke
ztrátě speciálních oprávnění, například: setuid, setgid

\newpage
\subsection{\textsf{Kompilace}}
Součástí základního systému je Portage. Portage je nativní package manager pro Gentoo.
Obstarává kompilace, instalace, závislosti, synchronizace a mnoho dalšího. V této fázi instalace
je doporučené optimalizovat kompilace. Veškerá globální konfigurace je součástí /etc/portage/make.conf.
Zároveň obsahuje přepínače pro překladače GCC, C++ a Rust. Jejich správnému nastavení bude věnována následující podkapitola.

\subsubsection{\textsf{Flags}}
¨Pro nastavení GCC slouží proměnná CFlags ve tvaru \texttt{CFLAGS="flag1 flag2..."}. Nastavení C++ je totožné, mění se pouze proměná a to na \texttt{'CXXFLAGS'}.
Uvádíme-li, že nastavení jsou totožná, je to myšleno doslovně. Je doporučeno, aby přepínače u překladačů byli při instalaci stejné. Níže je uvedena
vzorová konfigurace:

\hspace*{-1.5em}\texttt{CFLAGS="-march=native -O2 -pipe"}\\
\texttt{CXXFLAGS="-march=native -O2 -pipe"}

\hspace*{-1.5em}\texttt{-march=native} - použije nastavení a instrukční sady pro daný procesor\\
\texttt{-O2} - překladač se pokusí kompilovat rychleji na úkor paměti.\\
\texttt{-pipe} - zrychluje kompilaci díky 'rourám', ty překladač vytvoří místo dočasných souborů.\\

\hspace*{-1.5em}Proměnná pro Rust je \texttt{RUSTFLAGS}.

\texttt{RUSTFLAGS="\$-C target-cpu=native opt-level=2"}\\

\hspace*{-1.5em}\texttt{target-cpu=native} - přizpůsobí kompilaci pro instalovaný procesor.\\
\texttt{opt-level=2} - optimalizuje strojový kód, podobné -O2      %https://doc.rust-lang.org/rustc/codegen-options/index.html

\subsection{\textsf{MAKE Operace}}
Chceme-li, aby systém zůstal responzivní i během kompilace, je potřeba omezit maximální zatížení systému.
Přepínače make omezující zátěž se zadávají do proměnné \texttt{MAKEOPTS}.

\texttt{MAKEOPTS="-j5 -l5"}

\hspace{-1.5em}\texttt{-j} - určuje maximální počet paralelních procesů.\\
\texttt{-l} - nastavuje maximální vytížení procesoru.

\hspace{-1.5em}Důležitým faktorem pro volbu parametrů je, že každý proces zatěžuje mimo procesoru také paměť.

\newpage
\section{\textsf{Nový systém}}
Všechny následující kroky se již budou provádět v novém systému.
Pro vstup do nového systému, jelikož se nejedná o virtualizaci, je nutné zajistit přístup k fyzickým prostředkům.
Toho docílíme přikazem mount adresářů \texttt{/sys}, \texttt{/proc}, \texttt{/dev} a \texttt{/run} na jejich \texttt{/mnt/gentoo} protějšky. Chceme-li v novém 
systému stejné DNS servery, zkopírujeme ještě jejich záznam: \\ \texttt{cp /etc/resolv.conf /mnt/gentoo/etc}\\ Pokud se jedná o symlink
je potřeba přidat přepínač  \texttt{--dereference}, 
\\abychom zkopírovali soubor, ne odkaz na něj. 
\subsection{\textsf{Chroot}}
Do nového prostředí se dostaneme pomocí nástroje chroot ve tvaru:

\texttt{chroot /mnt/gentoo chroot.sh}\\
\texttt{/mnt/gentoo} - adresář s novým kořenem\\
\texttt{/bin/bash} - program/příkaz, který chceme v novém prostředí spustit

\hspace*{-1.5em}Zároveň je nyní vhodné namontovat EFI oddíl na \texttt{/efi} adresář.

\subsection{\textsf{Portage}}
Oficiální package manager pro Gentoo je Portage. Kromě instalací zároveň řeší závislosti, opravy, správu a metadata balíčků.
%Hlavním způsobem instalace je sestavení ze zdrojového kódu, avšak dnes již obsahuje i mnoho binárních balíčků. \\
\subsubsection{\textsf{Základní příkazy}}
Software se instaluje pomocí příkazu:  

 \texttt{emerge kategorie/nazev} 
 
\hspace*{-1.5em}Nevíme-li, některý z výše uvedených parametrů, můžeme využít příkaz:

\texttt{emerge --search regulerni\_vyraz} 

\hspace*{-1.5em}Příkaz pro jednoduchý update celého systému je:

\texttt{emerge -avuDN @world}\\

\hspace*{-1.5em}Uživatel by měl mít na paměti, že update může trvat až nižší desítky hodin. Pro lepší časový odhad je vhodné si přečíst obsah výstupu přepínače \texttt{-a}. %\texttt{-v}
\newpage
\subsubsection{\textsf{USE}}
Mezi hlavní výhody Portage patří USE Flags. Ty slouží ke konfiguraci sestavení a instalace balíčků. Určují jaké funkce mají programy obsahovat a podporovat.\\
Použijeme-li například vlajku \texttt{X}, bude všechen software instalován s podporou display serveru Xorg. Víme-li, že některé funkce nebudeme potřebovat, můžeme je odebrat pomocí znaménka mínus(pomlčky). Například: \texttt{-kde} odebere podporu grafických prostředí KDE.
Ne všechny balíčky přepínače USE podporují. Podporu přepínačů určují vývojáři.
Všechny použité přepínače se nachází ve složce \texttt{/etc/portage/make.conf}. \\
Jejich seznam si můžeme vypsat pomocí příkazu:

\texttt{cat /etc/portage/make.conf | grep USE}

\hspace*{-1.5em}Seznam všech přepínačů se nachází na webu:

\texttt{https://www.gentoo.org/support/use-flags/}\\

\hspace*{-1.5em}Existují i přepínače procesor a grafický čip. Přepínače pro procesor se nastavují pomocí programu cpuid2cpuflags:


\texttt{echo "*/* \$(cpuid2flags)" > /etc/portage/package.use/00cpu-flags}\\

\hspace*{-1.5em}Přepínače pro grafický čip, v případě potrřeby, lze nastavit pomocí příkazu:

\texttt{echo "*/* VIDEO\_CARDS: *gpu*" > /etc/portage/package.use/00video-cards}\\

\hspace*{-1.5em}\texttt{*gpu*} nahradíme dle následující tabulky:

\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|}
		\hline
		Výrobce & Přepínač & poznámka \\
		\hline
		Nvidia & nvidia & -\\
		\hline
		Intel & intel & od 4. Generace \\
		\hline
		AMD & amdgpu radeonsi & od roku 2013/14 \\
		\hline
		Raspberry Pi & vc4 & - \\
		\hline
		QEMU&virgl&-\\
		\hline
		KVM&virgl&-\\
		\hline
		WSL&d3d12&- \\
		\hline
		Nvidia & nouveau & Open Source*\\
		\hline
		
		%https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base
		%https://wiki.gentoo.org/wiki/Radeon#Feature_support
		%https://wiki.gentoo.org/wiki/Intel#Feature_support
		%https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Base#VIDEO_CARDS
	\end{tabular}
\end{table}
*Všechny modely kromě architektur Maxwell, Pascal, Volta
\newpage
\subsubsection{\textsf{Licence}}
%https://www.gentoo.org/glep/glep-0023.html#id7
%https://wiki.gentoo.org/wiki/License_groups
Od roku 2014 obsahují repositáře Gentoo štítky s licencemi balíčků. Pro lepší orientaci byla také zavedena proměnná \texttt{ACCEPT\_LICENSE}. Licence byly rozděleny do skupin, které se deklarují v~\texttt{/etc/portage/make.conf}:

\texttt{ACCEPT\_LICENSE="group"}

\hspace*{-1.5em}Základní skupiny jsou:

\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|}
		\hline
		Pro software & Popis & Svobodné \\
		\hline
		@GPL-COMPATIBLE & GPL kompatibilní & ANO \\
		\hline
		@FSF-APPROVED & Všechny licence schválené FSF & ANO \\
		\hline
		@MISC-FREE & Momentálně neschválené & ANO \\
		\hline		
		@EULA & Licence pro koncového uživatele & NE \\
		\hline
		@OSI-APPROVED & Schválené OSI & NE \\
		\hline
		@OSI-APPROVED-FREE & Schválené OSI & ANO \\
		\hline
		@OSI-APPROVED-NONFREE & Schválené OSI & NE \\
		\hline
		@BINARY-REDISTRUTABLE & Neschválené & - - - \\
		\hline

	\end{tabular}
\end{table}
\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|}
		\hline
		Pro dokumenty & Popis \\
		\hline
		@FSF-APPROVED-OTHER & FSF schválené non-Software Licence \\
		\hline
		@MISC-FREE-DOCS & Neschválená \\
		\hline
	\end{tabular}
\end{table}
\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|}
	\hline
	Nadskupiny & Popis \\
	\hline
	@FREE & @FREE-SOFTWARE a @FREE-DOCUMENTS \\
	\hline
	@FREE-SOFTWARE & @FSF-APPROVED a @OSI-APPROVED-FREE\\
	\hline
	@FREE-DOCUMENTS & @FSF-APPROVED-OTHER @MISC-FREE-DOCS\\
	\hline
	\end{tabular}
\end{table}
\hspace*{-1.5em}Pokud uživatel chce mít možnost nainstalovat software pod jakoukoliv licencí, může zvolit přepínač \texttt{*}.

\hspace*{-1.5em}Jelikož se jedná o limitující nastavení, script nastaví hodnotu parametru na \texttt{*}. Důvodem je velké množství proprietárních ovladačů, nutných pro funkci fyzických prostředků.


\hspace*{-1.5em}V případě, že uživatel chce použít licenci pouze v rámci balíčku, lze toho docílit pomocí záznamu v~\texttt{/etc/portage/package.use/} ve tvaru:

\texttt{nazev/balicku licence}

\hspace*{-1.5em}K propsání změn v \texttt{ACCEPT\_LICENSE} je nutné systém aktualizovat pomocí:

\texttt{emerge --ask --verbose --update --deep --newuse @world}


\newpage

\section{\textsf{Kernel}}
%https://cs.wikipedia.org/wiki/J%C3%A1dro_opera%C4%8Dn%C3%ADho_syst%C3%A9mu
Jádro, kernel, je součástí většiny operačních systémů. Zajišťuje přístup k~fyzickým prostředkům počítače. Mezi hlavní funkce patří správa: procesorů, procesů, pamětí a periferií. 

\hspace*{-1.5em}Program nikdy nekomunikuje přímo s komponentou, místo toho komunikuje s jádrem pomocí systémových volání, které pak předá instrukce komponentě. Vyhodou je, že jádro může takto sbírat instrukce od více procesů a následně je řadit podle plánovacího algoritmu, tzv. scheduler.

\subsection{\textsf{Scheduler}}
%https://en.wikipedia.org/wiki/Earliest_eligible_virtual_deadline_first_scheduling
%https://hackmd.io/@Kuanch/eevdf
%https://www.phoronix.com/news/Linux-6.6-EEVDF-Merged
%https://en.wikipedia.org/wiki/Completely_Fair_Scheduler
%https://blogs.oracle.com/linux/post/cfs-group-scheduling
Scheduler pro linuxové jádro se nazývá {\bf C}ompletely {\bf F}air {\bf S}cheduler ({\bf CFS}). Účelem je poskytnout všem entitám stejný čas na procesoru. Entity zaštiťují jeden proces či skupinu procesů. Nejmenší možnou entitou je jeden jednovláknový proces, největší entita (skupina) může obsahovat všechny běžící procesy, taková entita je označena \texttt{root\_task\_group}. 
\subsubsection{\textsf{Group scheduling}}
Skupiny mají přidělenou hodnotu \texttt{cpu.shares}. Poměr hodnot \texttt{cpu.shares} jednotlivých skupin určuje jejich čas na procesoru. Obsahuje-li skupina podskupiny, postup se opakuje. Dělení na skupiny není teoreticky nutné, avšak je žádoucí například na systémech s více uživateli.
\subsubsection{\textsf{Task scheduling}}
Po přidělení času (pod)skupinám je potřeba naplánovat jednotlivé procesy skupiny. Plánování se provádí pomocí hodnoty \texttt{vruntime}. \texttt{vruntime} je odvozen z doby strávené na procesoru a priority(NICE). Platí, že rostoucí priorita (klesající NICE) zpomaluje růst \texttt{vruntime}. Procesy s výšší prioritou dostanou více prostoru. Procesy jsou podle \texttt{vruntime} seřazeny do Red-black tree. Jedná se o upravený binární strom s barevně označenými uzly. Strom vždy řadí menší hodnotu (v tomto případě \texttt{vruntime}) vlevo. Barvy uzlů se průbežně mění, vždy však splňují čtyři podmínky:\\
1. Vkládaný uzel je červený.\\2. Každý uzel je černý nebo červený\\3. Nikdy nesmí být dva červené uzly bezprostředně nad sebou.\\4. Cesty z libovolných černých uzlů na konec obsahují stejný počet černých bodů. \\ 

\hspace*{-1.5em}Výše uvedené podmínky zaručují že:
1. Větve budou vždy

%https://ocw.mit.edu/courses/6-046j-introduction-to-algorithms-sma-5503-fall-2005/resources/lecture-10-red-black-trees-rotations-insertions-deletions/
%https://www.cs.kent.edu/~mallouzi/Algorithm%202014/Lecture14-a.pdf
%https://www.cs.usfca.edu/~galles/visualization/RedBlack.html
%https://www.eecs.umich.edu/courses/eecs380/ALG/red_black.html
%https://en.wikipedia.org/wiki/Red%E2%80%93black_tree
\subsection{\textsf{Firmware}}
\subsection{\textsf{Initramfs}}
\end{document}
